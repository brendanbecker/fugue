{
  "bug_id": "BUG-047",
  "title": "Clean up compiler warnings across fugue crates",
  "component": "build",
  "severity": "low",
  "priority": "P3",
  "status": "new",
  "reported_date": "2026-01-16",
  "updated_date": "2026-01-16",
  "assigned_to": null,
  "tags": ["tech-debt", "code-quality", "build"],
  "affected_versions": [],
  "environment": "development",
  "reproducibility": "always",
  "description": "The build produces 51+ warnings across fugue-server, fugue-client, and fugue-protocol. These should be cleaned up to maintain code quality and prevent important warnings from being buried in noise.",
  "steps_to_reproduce": [
    "Run `cargo build` or `cargo check` in the fugue workspace",
    "Observe 51+ warnings across the three crates"
  ],
  "expected_behavior": "Clean build with zero warnings (or minimal intentional ones)",
  "actual_behavior": "Build produces 51+ warnings including unused imports, deprecated usage, dead code, and unused variables",
  "evidence": {
    "warning_categories": {
      "unused_imports": {
        "count": 9,
        "note": "Fixable with `cargo fix`",
        "locations": [
          "ClientType in handlers/input.rs, mcp_bridge.rs, pane.rs, session.rs",
          "messages::ErrorDetails in handlers",
          "error::McpError in mcp/mod.rs",
          "GaugeSnapshot in observability/mod.rs",
          "crate::types::ClientType in codec.rs"
        ]
      },
      "deprecated_usage": {
        "count": 5,
        "note": "PaneState::Claude should use PaneState::Agent",
        "locations": [
          "fugue-protocol/src/types.rs:527",
          "fugue-client/src/ui/app.rs:1882",
          "fugue-server/src/handlers/mcp_bridge.rs:57",
          "fugue-server/src/persistence/restoration.rs:308, 354"
        ]
      },
      "dead_code": {
        "count": 30,
        "note": "Unused structs, functions, methods, and constants",
        "locations": [
          "beads.rs: is_beads_tracked, SocketNotFound, BEADS_* constants, repo_root field",
          "handlers/mod.rs: GlobalBroadcast variant, resolve_active_pane method",
          "mcp/handlers.rs: mirror_pane method",
          "mcp/server.rs: with_managers function",
          "orchestration/router.rs: MessageRouter and all methods, RouterError",
          "orchestration/worktree.rs: is_git_repo",
          "persistence/checkpoint.rs: extract_sequence, validate",
          "persistence/replay.rs: range, clear",
          "persistence/restoration.rs: without_pty_spawn",
          "persistence/scrollback.rs: ScrollbackConfig fields, ScrollbackCapture methods, ScrollbackRestore",
          "persistence/types.rs: Checkpoint::new, WalSegmentHeader",
          "persistence/wal.rs: WalConfig fields, Wal methods, WalReader",
          "agents/claude/mod.rs: ClaudeAgentDetector methods",
          "observability/metrics.rs: record_replay_failed"
        ]
      },
      "unused_variables": {
        "count": 4,
        "locations": [
          "agents/claude/mod.rs:67: text",
          "handlers/pane.rs:469: pane",
          "mcp/handlers.rs:1112: split_direction",
          "fugue-client/src/ui/app.rs:2213: ui_pane"
        ]
      }
    },
    "total_warnings": "51+"
  },
  "root_cause": "Accumulated tech debt from rapid development. Some dead code is scaffolding for planned features. Deprecation warnings from API migration not yet completed.",
  "impact": "Warning noise makes it harder to spot important new warnings. Increases cognitive load during development. Dead code bloats binary and complicates maintenance.",
  "related_items": []
}
